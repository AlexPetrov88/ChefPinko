{"ast":null,"code":"var _jsxFileName = \"/Users/alexpetrov/Documents/GitTesting/ChefPinko copy copy/app/src/contexts/GlobalContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useStorage } from '../hooks/useStorage';\nimport * as appService from '../services/appService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const GlobalContext = /*#__PURE__*/createContext();\nexport const GlobalProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [userState, setUserState] = useStorage('userData', {});\n  const navigate = useNavigate();\n  const [showModal, setShowModal] = useState(false);\n  const [errorText, setErrorText] = useState();\n  // const userService = userServiceFactory(userState.accessToken)\n\n  // LOGIN\n  const onLoginSubmit = async data => {\n    if (data.email === '' || data.password === '') {\n      setShowModal(true);\n      setErrorText('All fealds are required!');\n      return;\n    } else {\n      try {\n        const result = await appService.login(data.email, data.password);\n        setUserState(result);\n        navigate('/catalog');\n        return;\n      } catch (error) {\n        setShowModal(true);\n        setErrorText(error.message);\n      }\n    }\n  };\n\n  // REGISTER\n  const onRegisterSubmit = async data => {\n    if (data.email === '' || data.password === '') {\n      setShowModal(true);\n      setErrorText('All fealds are required!');\n      return;\n    }\n    if (data.password !== data['confirm-password']) {\n      setShowModal(true);\n      setErrorText('Password don\\'t match');\n      return;\n    }\n    try {\n      const result = await appService.register(data.email, data.password);\n      setUserState(result);\n      navigate('/catalog');\n      return;\n    } catch (error) {\n      setShowModal(true);\n      setErrorText(error.message);\n    }\n  };\n\n  // LOGOUT\n\n  const onLogoutSubmit = async () => {\n    await appService.logout();\n    setUserState({});\n  };\n  const contextValues = {\n    onLoginSubmit,\n    onRegisterSubmit,\n    onLogoutSubmit,\n    userId: userState.id,\n    token: userState.token,\n    userEmail: userState.email,\n    isAuthenticated: !!userState.token,\n    showModal,\n    setShowModal,\n    errorText\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(GlobalContext.Provider, {\n      value: contextValues,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n_s(GlobalProvider, \"5rkOrZsLqN319g2rf5uY3ShdIVU=\", false, function () {\n  return [useStorage, useNavigate];\n});\n_c = GlobalProvider;\nexport const useAuthContext = () => {\n  _s2();\n  const context = useContext(GlobalContext);\n  return context;\n};\n\n// // where we set context\n//         import { GlobalContext } from './GlobalContext';\n\n//         const contextValues = {\n//             onChangeHandler,\n//             values,\n//         };\n\n//         return (\n//             <GlobalContext.Provider value={contextValues}>\n//             <Header /> \n\n//             <CreatePage />\n//             </GlobalContext.Provider>\n//         )\n\n// // where we use context\n//         import { useContext } from 'react'; \n//         import { GlobalContext } from './GlobalContext';\n\n// // write in component where we use context above return\n//         const { name, age, onChangeHandler } = useContext(GlobalContext);       \n_s2(useAuthContext, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"GlobalProvider\");","map":{"version":3,"names":["createContext","useState","useContext","useNavigate","useStorage","appService","jsxDEV","_jsxDEV","Fragment","_Fragment","GlobalContext","GlobalProvider","_ref","_s","children","userState","setUserState","navigate","showModal","setShowModal","errorText","setErrorText","onLoginSubmit","data","email","password","result","login","error","message","onRegisterSubmit","register","onLogoutSubmit","logout","contextValues","userId","id","token","userEmail","isAuthenticated","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuthContext","_s2","context","$RefreshReg$"],"sources":["/Users/alexpetrov/Documents/GitTesting/ChefPinko copy copy/app/src/contexts/GlobalContext.js"],"sourcesContent":["import { createContext, useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useStorage } from '../hooks/useStorage';\n\nimport * as appService  from '../services/appService'; \n\n\nexport const GlobalContext = createContext();\n\n\nexport const GlobalProvider = ({\n    children,\n}) => {\n    const [userState, setUserState] = useStorage('userData', {});\n    const navigate = useNavigate();\n    const [showModal, setShowModal] = useState(false);\n    const [errorText, setErrorText] = useState();\n    // const userService = userServiceFactory(userState.accessToken)\n\n     // LOGIN\n     const onLoginSubmit = async (data) => {\n        if (data.email === '' || data.password === '') {\n            setShowModal(true);\n            setErrorText('All fealds are required!')\n            return;\n        } else {\n\n            try {\n                const result = await appService.login(data.email, data.password);\n            \n                setUserState(result);\n            \n                navigate('/catalog');\n                return;\n            } catch (error) {\n                setShowModal(true);\n                setErrorText(error.message);\n            }\n        }\n    \n    };\n\n    // REGISTER\n    const onRegisterSubmit = async (data) => {\n        if (data.email === '' || data.password === '') {\n            setShowModal(true);\n            setErrorText('All fealds are required!')\n            return;\n        } \n        \n        if (data.password !== data['confirm-password']) {\n            setShowModal(true);\n            setErrorText('Password don\\'t match')\n            return;\n        }\n    \n            try {\n                const result = await appService.register(data.email, data.password);\n\n                setUserState(result);\n\n                navigate('/catalog');\n                return;\n            } catch (error) {\n                setShowModal(true);\n                setErrorText(error.message);\n            }\n            \n        };  \n\n    // LOGOUT\n\n    const onLogoutSubmit = async () => {\n        await appService.logout();\n        setUserState({});\n        \n    } \n    const contextValues = {\n        onLoginSubmit,\n        onRegisterSubmit,\n        onLogoutSubmit,\n        userId: userState.id,\n        token: userState.token,\n        userEmail: userState.email,\n        isAuthenticated: !!userState.token,\n        showModal,\n        setShowModal,\n        errorText,\n    };\n \n\n    return (\n        <>\n            <GlobalContext.Provider value={contextValues}>\n                {children}\n            </GlobalContext.Provider>\n        </>\n    )\n};\n\nexport const useAuthContext = () => {\n    const context = useContext(GlobalContext);\n\n    return context;\n}\n\n\n\n\n\n\n\n\n\n// // where we set context\n//         import { GlobalContext } from './GlobalContext';\n\n//         const contextValues = {\n//             onChangeHandler,\n//             values,\n//         };\n\n//         return (\n//             <GlobalContext.Provider value={contextValues}>\n//             <Header /> \n\n//             <CreatePage />\n//             </GlobalContext.Provider>\n//         )\n\n\n// // where we use context\n//         import { useContext } from 'react'; \n//         import { GlobalContext } from './GlobalContext';\n\n\n// // write in component where we use context above return\n//         const { name, age, onChangeHandler } = useContext(GlobalContext);       "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}