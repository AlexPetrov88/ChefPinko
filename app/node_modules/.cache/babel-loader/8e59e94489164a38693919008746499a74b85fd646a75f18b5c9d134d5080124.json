{"ast":null,"code":"var _jsxFileName = \"/Users/alexpetrov/JavaScript/ReactApps/projectChefSteps copy/client/src/contexts/GlobalContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\nimport * as recipesService from '../services/recipesService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const GlobalContext = /*#__PURE__*/createContext();\nexport const GlobalProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [userState, setUserState] = useLocalStorage('user', {});\n  const navigate = useNavigate();\n\n  // const userService = userServiceFactory(userState.accessToken)\n\n  // LOGIN\n  const onLoginSubmit = async data => {\n    if (data.email === '' || data.password === '') {\n      alert('All fealds are required!');\n      return;\n    }\n    try {\n      const result = await recipesService.login(data.email, data.password);\n      setUserState(result);\n      navigate('/catalog');\n    } catch (error) {\n      alert(`error: ${error}`);\n    }\n  };\n\n  // REGISTER\n  const onRegisterSubmit = async data => {\n    if (data.email === '' || data.password === '') {\n      alert('All fealds are required!');\n      return;\n    }\n    if (data.password !== data['confirm-password']) {\n      alert('Password don\\'t match');\n      return;\n    }\n    try {\n      const result = await recipesService.register(data.email, data.password);\n      setUserState(result);\n      navigate('/catalog');\n    } catch (error) {\n      alert(`error: ${error}`);\n    }\n  };\n\n  // LOGOUT\n\n  const onLogoutSubmit = async () => {\n    await recipesService.logout();\n    setUserState({});\n  };\n  const contextValues = {\n    onLoginSubmit,\n    onRegisterSubmit,\n    onLogoutSubmit,\n    userId: userState._id,\n    token: userState.accessToken,\n    userEmail: userState.email,\n    isAuthenticated: !!userState.accessToken\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(GlobalContext.Provider, {\n      value: contextValues,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n_s(GlobalProvider, \"OccI7V7Yr1XcOXM2V9NVqCnEjHw=\", false, function () {\n  return [useLocalStorage, useNavigate];\n});\n_c = GlobalProvider;\nexport const useAuthContext = () => {\n  _s2();\n  const context = useContext(GlobalContext);\n  return context;\n};\n\n// // where we set context\n//         import { GlobalContext } from './GlobalContext';\n\n//         const contextValues = {\n//             onChangeHandler,\n//             values,\n//         };\n\n//         return (\n//             <GlobalContext.Provider value={contextValues}>\n//             <Header /> \n\n//             <CreatePage />\n//             </GlobalContext.Provider>\n//         )\n\n// // where we use context\n//         import { useContext } from 'react'; \n//         import { GlobalContext } from './GlobalContext';\n\n// // write in component where we use context above return\n//         const { name, age, onChangeHandler } = useContext(GlobalContext);       \n_s2(useAuthContext, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"GlobalProvider\");","map":{"version":3,"names":["createContext","useState","useContext","useNavigate","useLocalStorage","recipesService","jsxDEV","_jsxDEV","Fragment","_Fragment","GlobalContext","GlobalProvider","_ref","_s","children","userState","setUserState","navigate","onLoginSubmit","data","email","password","alert","result","login","error","onRegisterSubmit","register","onLogoutSubmit","logout","contextValues","userId","_id","token","accessToken","userEmail","isAuthenticated","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuthContext","_s2","context","$RefreshReg$"],"sources":["/Users/alexpetrov/JavaScript/ReactApps/projectChefSteps copy/client/src/contexts/GlobalContext.js"],"sourcesContent":["import { createContext, useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useLocalStorage } from '../hooks/useLocalStorage';\n\nimport * as recipesService  from '../services/recipesService'; \n\n\nexport const GlobalContext = createContext();\n\n\nexport const GlobalProvider = ({\n    children,\n}) => {\n    const [userState, setUserState] = useLocalStorage('user', {});\n    const navigate = useNavigate();\n\n    // const userService = userServiceFactory(userState.accessToken)\n\n     // LOGIN\n     const onLoginSubmit = async (data) => {\n        if (data.email === '' || data.password === '') {\n            alert('All fealds are required!');\n            return;\n        }\n    try {\n        const result = await recipesService.login(data.email, data.password);\n    \n        setUserState(result);\n    \n        navigate('/catalog');\n    } catch (error) {\n        alert(`error: ${error}`);\n    }\n    };\n\n    // REGISTER\n    const onRegisterSubmit = async (data) => {\n        if (data.email === '' || data.password === '') {\n            alert('All fealds are required!');\n            return;\n        } \n        \n        if (data.password !== data['confirm-password']) {\n            alert('Password don\\'t match');\n            return;\n        }\n    \n            try {\n                const result = await recipesService.register(data.email, data.password);\n\n                setUserState(result);\n\n                navigate('/catalog');\n            } catch (error) {\n                alert(`error: ${error}`);\n            }\n            \n        };  \n\n    // LOGOUT\n\n    const onLogoutSubmit = async () => {\n        await recipesService.logout();\n        setUserState({});\n        \n    } \n    const contextValues = {\n        onLoginSubmit,\n        onRegisterSubmit,\n        onLogoutSubmit,\n        userId: userState._id,\n        token: userState.accessToken,\n        userEmail: userState.email,\n        isAuthenticated: !!userState.accessToken,\n    };\n\n    return (\n        <>\n            <GlobalContext.Provider value={contextValues}>\n                {children}\n            </GlobalContext.Provider>\n        </>\n    )\n};\n\nexport const useAuthContext = () => {\n    const context = useContext(GlobalContext);\n\n    return context;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// // where we set context\n//         import { GlobalContext } from './GlobalContext';\n\n//         const contextValues = {\n//             onChangeHandler,\n//             values,\n//         };\n\n//         return (\n//             <GlobalContext.Provider value={contextValues}>\n//             <Header /> \n\n//             <CreatePage />\n//             </GlobalContext.Provider>\n//         )\n\n\n// // where we use context\n//         import { useContext } from 'react'; \n//         import { GlobalContext } from './GlobalContext';\n\n\n// // write in component where we use context above return\n//         const { name, age, onChangeHandler } = useContext(GlobalContext);       "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}