{"ast":null,"code":"const requester = async (method, token, url, data) => {\n  const options = {};\n  if (method !== 'GET') {\n    options.method = method;\n    if (data) {\n      options.headers = {\n        'content-type': 'application/json'\n      };\n      options.body = JSON.stringify(data);\n    }\n  }\n  if (token) {\n    options.headers = {\n      ...options.headers,\n      'X-Authorization': token\n    };\n  }\n  const response = await fetch(url, options);\n  if (response.status === 204) {\n    return {};\n  }\n  const result = await response.json();\n  if (!response.ok) {\n    throw result;\n  }\n  return result;\n};\nexport const requestFactory = token => {\n  if (!token) {\n    const serializedUser = localStorage.getItem('user');\n    if (serializedUser) {\n      const user = JSON.parse(serializedUser);\n      token = user.accessToken;\n    }\n  }\n  return {\n    get: requester.bind(null, 'GET', token),\n    post: requester.bind(null, 'POST', token),\n    put: requester.bind(null, 'PUT', token),\n    patch: requester.bind(null, 'PATCH', token),\n    delete: requester.bind(null, 'DELETE', token)\n  };\n};\n\n// import { getUserData, setUserData, clearUserData } from './util.js' \n\n// const host = 'http://localhost:3030';\n\n// async function request(url, options) {\n//   try {\n//     const response = await fetch(host + url, options);\n//     if (response.ok !== true) {\n//       if (response.status === 403) {\n//         clearUserData();\n//       }\n//       const error = await response.json();\n//       throw new Error(error.message);\n//     }\n//     if (response.status === 204) {\n//       return response;\n//     } else {\n//       return response.json();\n//     }\n//   } catch (err) {\n//     alert(err.message);\n//     throw err;\n//   }\n// }\n\n// function createOptions(method = 'get', data) {\n//   const options = {\n//     method,\n//     headers: {}\n// };\n//   if (data !== undefined) {\n//     options.headers['Content-Type'] = 'application/json';\n//     options.body = JSON.stringify(data);\n// }\n//   const userData = getUserData();\n//   if (userData != null) {\n//     options.headers['X-Authorization'] = userData.token;\n//   }\n//   return options;\n// }\n\n// export async function get(url) {\n//   return request(url, createOptions());\n// }\n// export async function post(url, data) {\n//   return request(url, createOptions('post', data));\n// }\n// export async function put(url, data) {\n//   return request(url, createOptions('put', data));\n// }\n// export async function del(url) {\n//   return request(url, createOptions('delete'));\n// }\n\n// export async function login(email, password) {\n//   const result = await post('/users/login', { email, password });\n//   const userData = {\n//   email: result.email,\n//   id: result._id,\n//   token: result.accessToken\n//   };\n//   setUserData(userData);\n//   return userData;\n// }\n\n// export async function register(email, password) {\n//   const result = await post('/users/register', {email, password});\n//   const userData = {\n//   email: result.email, \n//   id: result._id, \n//   token: result.accessToken,\n//   };\n//   setUserData(userData);\n//   return userData;\n// }\n\n// export async function logout() {\n//   await get('/users/logout'); \n//   clearUserData();\n// }","map":{"version":3,"names":["requester","method","token","url","data","options","headers","body","JSON","stringify","response","fetch","status","result","json","ok","requestFactory","serializedUser","localStorage","getItem","user","parse","accessToken","get","bind","post","put","patch","delete"],"sources":["/Users/alexpetrov/JavaScript/ReactApps/projectChefSteps copy/client/src/services/api.js"],"sourcesContent":["\nconst requester = async (method, token, url, data) => {\n  const options = {};\n\n  if (method !== 'GET') {\n      options.method = method;\n\n      if (data) {\n          options.headers = {\n              'content-type': 'application/json',\n          };\n\n          options.body = JSON.stringify(data);\n      }\n  }\n\n  if (token) {\n      options.headers = {\n          ...options.headers,\n          'X-Authorization': token,\n      };\n  }\n\n  const response = await fetch(url, options);\n\n  if (response.status === 204) {\n      return {};\n  }\n\n  const result = await response.json();\n\n  if (!response.ok) {\n      throw result;\n  }\n\n  return result;\n};\n\nexport const requestFactory = (token) => {\n  if (!token) {\n      const serializedUser = localStorage.getItem('user');\n\n      if (serializedUser) {\n          const user = JSON.parse(serializedUser);\n          token = user.accessToken;\n      }\n  }\n\n  return {\n      get: requester.bind(null, 'GET', token),\n      post: requester.bind(null, 'POST', token),\n      put: requester.bind(null, 'PUT', token),\n      patch: requester.bind(null, 'PATCH', token),\n      delete: requester.bind(null, 'DELETE', token),\n  }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import { getUserData, setUserData, clearUserData } from './util.js' \n\n// const host = 'http://localhost:3030';\n\n// async function request(url, options) {\n//   try {\n//     const response = await fetch(host + url, options);\n//     if (response.ok !== true) {\n//       if (response.status === 403) {\n//         clearUserData();\n//       }\n//       const error = await response.json();\n//       throw new Error(error.message);\n//     }\n//     if (response.status === 204) {\n//       return response;\n//     } else {\n//       return response.json();\n//     }\n//   } catch (err) {\n//     alert(err.message);\n//     throw err;\n//   }\n// }\n\n// function createOptions(method = 'get', data) {\n//   const options = {\n//     method,\n//     headers: {}\n// };\n//   if (data !== undefined) {\n//     options.headers['Content-Type'] = 'application/json';\n//     options.body = JSON.stringify(data);\n// }\n//   const userData = getUserData();\n//   if (userData != null) {\n//     options.headers['X-Authorization'] = userData.token;\n//   }\n//   return options;\n// }\n\n\n// export async function get(url) {\n//   return request(url, createOptions());\n// }\n// export async function post(url, data) {\n//   return request(url, createOptions('post', data));\n// }\n// export async function put(url, data) {\n//   return request(url, createOptions('put', data));\n// }\n// export async function del(url) {\n//   return request(url, createOptions('delete'));\n// }\n\n// export async function login(email, password) {\n//   const result = await post('/users/login', { email, password });\n//   const userData = {\n//   email: result.email,\n//   id: result._id,\n//   token: result.accessToken\n//   };\n//   setUserData(userData);\n//   return userData;\n// }\n\n// export async function register(email, password) {\n//   const result = await post('/users/register', {email, password});\n//   const userData = {\n//   email: result.email, \n//   id: result._id, \n//   token: result.accessToken,\n//   };\n//   setUserData(userData);\n//   return userData;\n// }\n\n// export async function logout() {\n//   await get('/users/logout'); \n//   clearUserData();\n// }\n\n\n"],"mappings":"AACA,MAAMA,SAAS,GAAG,MAAAA,CAAOC,MAAM,EAAEC,KAAK,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACpD,MAAMC,OAAO,GAAG,CAAC,CAAC;EAElB,IAAIJ,MAAM,KAAK,KAAK,EAAE;IAClBI,OAAO,CAACJ,MAAM,GAAGA,MAAM;IAEvB,IAAIG,IAAI,EAAE;MACNC,OAAO,CAACC,OAAO,GAAG;QACd,cAAc,EAAE;MACpB,CAAC;MAEDD,OAAO,CAACE,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC;IACvC;EACJ;EAEA,IAAIF,KAAK,EAAE;IACPG,OAAO,CAACC,OAAO,GAAG;MACd,GAAGD,OAAO,CAACC,OAAO;MAClB,iBAAiB,EAAEJ;IACvB,CAAC;EACL;EAEA,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAG,EAAEE,OAAO,CAAC;EAE1C,IAAIK,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;IACzB,OAAO,CAAC,CAAC;EACb;EAEA,MAAMC,MAAM,GAAG,MAAMH,QAAQ,CAACI,IAAI,EAAE;EAEpC,IAAI,CAACJ,QAAQ,CAACK,EAAE,EAAE;IACd,MAAMF,MAAM;EAChB;EAEA,OAAOA,MAAM;AACf,CAAC;AAED,OAAO,MAAMG,cAAc,GAAId,KAAK,IAAK;EACvC,IAAI,CAACA,KAAK,EAAE;IACR,MAAMe,cAAc,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAEnD,IAAIF,cAAc,EAAE;MAChB,MAAMG,IAAI,GAAGZ,IAAI,CAACa,KAAK,CAACJ,cAAc,CAAC;MACvCf,KAAK,GAAGkB,IAAI,CAACE,WAAW;IAC5B;EACJ;EAEA,OAAO;IACHC,GAAG,EAAEvB,SAAS,CAACwB,IAAI,CAAC,IAAI,EAAE,KAAK,EAAEtB,KAAK,CAAC;IACvCuB,IAAI,EAAEzB,SAAS,CAACwB,IAAI,CAAC,IAAI,EAAE,MAAM,EAAEtB,KAAK,CAAC;IACzCwB,GAAG,EAAE1B,SAAS,CAACwB,IAAI,CAAC,IAAI,EAAE,KAAK,EAAEtB,KAAK,CAAC;IACvCyB,KAAK,EAAE3B,SAAS,CAACwB,IAAI,CAAC,IAAI,EAAE,OAAO,EAAEtB,KAAK,CAAC;IAC3C0B,MAAM,EAAE5B,SAAS,CAACwB,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAEtB,KAAK;EAChD,CAAC;AACH,CAAC;;AAgBD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}