{"ast":null,"code":"var _jsxFileName = \"/Users/alexpetrov/Documents/GitTesting/ChefPinko copy copy/app/src/components/DetailsClasses/DetailsClasses.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useReducer } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { useContext } from 'react';\nimport { GlobalContext } from '../../contexts/GlobalContext';\nimport * as appService from \"../../services/appService\";\n\n// import { AddComment } from './AddComment/AddComment';\nimport { reducer } from '../../reducer/reducer';\nimport { RecipeContext } from \"../../contexts/RecipeContext\";\nimport React, { useState } from 'react';\nimport YouTube from 'react-youtube';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const DetailsClasses = () => {\n  _s();\n  const {\n    onDeleteRecipe\n  } = useContext(RecipeContext);\n  const {\n    detailsId\n  } = useParams();\n  const {\n    userId,\n    isAuthenticated,\n    userEmail\n  } = useContext(GlobalContext);\n  // const [ recipeData, setRecipeData ] = useState({});\n  const [recipe, dispatch] = useReducer(reducer, {});\n\n  // useEffect(() => {\n  //     appService.getRecipeById(detailsId)\n  //     .then(res => {\n  //         setRecipeData(res);\n  //     })\n  // }, [detailsId])\n\n  useEffect(() => {\n    Promise.all([appService.getRecipeById(detailsId), appService.getCommentsById(detailsId)]).then(_ref => {\n      let [recipeData, comments] = _ref;\n      // console.log(recipeData);\n      // console.log(comments);\n      const recipeState = {\n        ...recipeData,\n        comments\n      };\n      // console.log(recipeState);\n\n      dispatch({\n        type: 'RECIPE_FETCH',\n        payload: recipeState\n      });\n    });\n  }, [detailsId]);\n  const onCommentSubmit = async values => {\n    const response = await appService.postCreateCommets(detailsId, values.comment);\n    console.log(response);\n    dispatch({\n      type: 'COMMENT_ADD',\n      payload: response,\n      userEmail\n    });\n  };\n  const isOwner = recipe._ownerId === userId;\n  console.log(recipe);\n  const videoId = \"v=wMdUrxOXsqU\";\n  const opts = {\n    height: '360',\n    width: '640',\n    playerVars: {\n      autoplay: 1\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"details\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"YouTube Video Player\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(YouTube, {\n        videoId: videoId,\n        opts: opts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detailsContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detailImgContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: recipe.imageUrl,\n          alt: \"\",\n          className: \"daetailImg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detailContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"recipeTitle\",\n          children: \"Recipe Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"recipeName\",\n          children: recipe.recipeName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"recipeChef\",\n          children: recipe.chef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"recipeTimeForCooking\",\n          children: recipe.time\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"recipeSummary\",\n          children: recipe.summary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), isOwner && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            onClick: () => onDeleteRecipe(detailsId),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: `/catalog/${detailsId}/editPage`,\n            className: \"link\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn\",\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 87\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true), isAuthenticated && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          children: \"Rating\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n_s(DetailsClasses, \"1CRMU0aWRwjRgw8/+IZdl6qQIXw=\", false, function () {\n  return [useParams];\n});\n_c = DetailsClasses;\nvar _c;\n$RefreshReg$(_c, \"DetailsClasses\");","map":{"version":3,"names":["useEffect","useReducer","useParams","Link","useContext","GlobalContext","appService","reducer","RecipeContext","React","useState","YouTube","jsxDEV","_jsxDEV","Fragment","_Fragment","DetailsClasses","_s","onDeleteRecipe","detailsId","userId","isAuthenticated","userEmail","recipe","dispatch","Promise","all","getRecipeById","getCommentsById","then","_ref","recipeData","comments","recipeState","type","payload","onCommentSubmit","values","response","postCreateCommets","comment","console","log","isOwner","_ownerId","videoId","opts","height","width","playerVars","autoplay","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","imageUrl","alt","recipeName","chef","time","summary","onClick","to","_c","$RefreshReg$"],"sources":["/Users/alexpetrov/Documents/GitTesting/ChefPinko copy copy/app/src/components/DetailsClasses/DetailsClasses.js"],"sourcesContent":["import { useEffect, useReducer } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { useContext } from 'react'; \nimport { GlobalContext } from '../../contexts/GlobalContext';\n\n\nimport * as appService from \"../../services/appService\";\n\n// import { AddComment } from './AddComment/AddComment';\nimport { reducer } from '../../reducer/reducer';\nimport { RecipeContext } from \"../../contexts/RecipeContext\";\n\nimport React, { useState } from 'react';\nimport YouTube from 'react-youtube';\n\nexport const DetailsClasses = () => {\n    const { onDeleteRecipe } = useContext(RecipeContext);\n    const { detailsId } = useParams();\n    const { userId, isAuthenticated, userEmail } = useContext(GlobalContext);\n    // const [ recipeData, setRecipeData ] = useState({});\n    const [recipe, dispatch] = useReducer(reducer, {});\n\n\n    // useEffect(() => {\n    //     appService.getRecipeById(detailsId)\n    //     .then(res => {\n    //         setRecipeData(res);\n    //     })\n    // }, [detailsId])\n\n    useEffect(() => {\n        Promise.all([\n            appService.getRecipeById(detailsId),\n            appService.getCommentsById(detailsId),\n        ]).then(([recipeData, comments]) => {\n            // console.log(recipeData);\n            // console.log(comments);\n            const recipeState = {\n                ...recipeData,\n                comments,\n            };\n            // console.log(recipeState);\n            \n            dispatch({type: 'RECIPE_FETCH', payload: recipeState})\n        });\n    }, [detailsId]);\n\n    const onCommentSubmit = async (values) => {\n        const response = await appService.postCreateCommets(detailsId, values.comment);\n        console.log(response);\n        dispatch({\n            type: 'COMMENT_ADD',\n            payload: response,\n            userEmail,\n        });\n    };\n   \n    const isOwner = recipe._ownerId === userId;\n    console.log(recipe);\n\n    const videoId = \"v=wMdUrxOXsqU\";\n    const opts = {\n        height: '360',\n        width: '640',\n        playerVars: {\n          autoplay: 1,\n        },\n    };\n\n    return(\n        <section className=\"details\">\n             <div>\n                <h2>YouTube Video Player</h2>\n                <br />\n                <YouTube videoId={videoId} opts={opts} />\n            </div>\n\n            <div className=\"detailsContainer\">\n                <div className=\"detailImgContainer\">\n                    <img src={recipe.imageUrl} alt=\"\" className=\"daetailImg\" />\n                </div>\n                <div className=\"detailContent\">\n                    <h2 className=\"recipeTitle\">Recipe Details</h2>\n                    <h3 className=\"recipeName\">{recipe.recipeName}</h3>\n                    <span className=\"recipeChef\">{recipe.chef}</span>\n                    <p className=\"recipeTimeForCooking\">{recipe.time}</p>\n                    <p className=\"recipeSummary\">{recipe.summary}</p>\n                    {isOwner && (\n                        <>\n                        <button className=\"btn\" onClick={() => onDeleteRecipe(detailsId)}>Delete</button>\n                        <Link to={`/catalog/${detailsId}/editPage`} className=\"link\" ><button className=\"btn\">Edit</button></Link>\n                        </>\n                    )}\n                    {isAuthenticated && (\n                        <button className=\"btn\">Rating</button>\n                    )}\n                </div>\n                {/* <div className=\"details-comments\">\n                    <h2>Comments:</h2>\n                    <ul role=\"list\">\n                        {recipe.comments && recipe.comments.map(x => (\n                            <li key={x._id} className=\"comment\" >\n                                <p>{x.author.email}: {x.comment}</p>\n                            </li>\n                        ))}\n                    </ul>\n\n                    {!recipe.comments?.length && (\n                        <p className=\"no-comment\">No comments.</p>\n                    )}\n                </div> */}\n                {/* {isAuthenticated && <AddComment onCommentSubmit={onCommentSubmit} />} */}\n            </div>\n            \n\n        </section>\n    );\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}